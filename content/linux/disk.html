<!DOCTYPE HTML><html lang=""><head><meta charset="UTF-8"><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><title>disk Â· cheatsheet</title><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content=""><meta name="generator" content="GitBook 3.2.3"><meta name="author" content="XS Zhao"><link rel="stylesheet" href="../../gitbook/style.css"><link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism.css"><link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css"><link rel="stylesheet" href="../../gitbook/gitbook-plugin-folding-chapters/folding-chapters.css"><link rel="stylesheet" href="../../gitbook/gitbook-plugin-search-plus/search.css"><link rel="stylesheet" href="../../gitbook/gitbook-plugin-splitter/splitter.css"><link rel="stylesheet" href="../../gitbook/gitbook-plugin-page-footer/footer.css"><link rel="stylesheet" href="../../gitbook/gitbook-plugin-terminal/plugin.css"><link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css"><link rel="stylesheet" type="text/css" href="../../custom/my.css"><meta name="HandheldFriendly" content="true"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png"><link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon"><link rel="next" href="inode.html"><link rel="prev" href="cpu.html"><style>@media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }</style><script>window["gitbook-plugin-github-buttons"] = {"buttons":[{"user":"hansonzhao007","repo":"cheatsheet","type":"star","size":"small","count":true}]};</script></head><body><div class="book"><div class="book-summary"><div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div><nav role="navigation"><ul class="summary"><li class="chapter" data-level="1.1" data-path="../../"><a href="../../">Introduction</a></li><li class="chapter" data-level="1.2"><span>C++</span><ul class="articles"><li class="chapter" data-level="1.2.1"><a target="_blank" href="https://google.github.io/styleguide/cppguide.html">Google C++ Style Guide</a></li></ul></li><li class="chapter" data-level="1.3"><a target="_blank" href="http://xszhao.science/blog/markdown-syntax/">Markdown</a></li><li class="chapter" data-level="1.4"><span>Git</span><ul class="articles"><li class="chapter" data-level="1.4.1"><a target="_blank" href="https://education.github.com/git-cheat-sheet-education.pdf">cheatsheet</a></li><li class="chapter" data-level="1.4.2" data-path="../git/skills.html"><a href="../git/skills.html">skills</a></li></ul></li><li class="chapter" data-level="1.5"><span>Linux</span><ul class="articles"><li class="chapter" data-level="1.5.1" data-path="cmake.html"><a href="cmake.html">cmake</a></li><li class="chapter" data-level="1.5.2" data-path="cpu.html"><a href="cpu.html">cpu</a></li><li class="chapter active" data-level="1.5.3" data-path="disk.html"><a href="disk.html">disk</a></li><li class="chapter" data-level="1.5.4" data-path="inode.html"><a href="inode.html">inode</a></li><li class="chapter" data-level="1.5.5" data-path="mem.html"><a href="mem.html">memory</a></li><li class="chapter" data-level="1.5.6" data-path="network.html"><a href="network.html">network</a></li><li class="chapter" data-level="1.5.7" data-path="perf.html"><a href="perf.html">perf</a></li><li class="chapter" data-level="1.5.8" data-path="ssh.html"><a href="ssh.html">ssh</a></li><li class="chapter" data-level="1.5.9" data-path="skills.html"><a href="skills.html">skills</a></li></ul></li><li class="chapter" data-level="1.6"><span>Python</span><ul class="articles"><li class="chapter" data-level="1.6.1" data-path="../python/pandas.html"><a href="../python/pandas.html">pandas</a></li></ul></li><li class="chapter" data-level="1.7"><span>Web</span><ul class="articles"><li class="chapter" data-level="1.7.1" data-path="../web/gitbook.html"><a href="../web/gitbook.html">Gitbook</a></li></ul></li><li class="chapter" data-level="1.8" data-path="../vim.html"><a href="../vim.html">Vim</a></li><li class="divider"></li><li><a href="https://www.gitbook.com" target="blank" class="gitbook-link">Published with GitBook</a></li></ul></nav></div><div class="book-body"><div class="body-inner"><div class="book-header" role="navigation"><!-- Title --><h1><i class="fa fa-circle-o-notch fa-spin"></i> <a href="../..">disk</a></h1></div><div class="page-wrapper" tabindex="-1" role="main"><div class="page-inner"><div class="search-plus" id="book-search-results"><div class="search-noresults"><section class="normal markdown-section"><div id="anchor-navigation-ex-navbar"><i class="fa fa-anchor"></i><ul><li><span class="title-icon"></span><a href="#&#x683C;&#x5F0F;&#x5316;&#x78C1;&#x76D8;"><b>1. </b>&#x683C;&#x5F0F;&#x5316;&#x78C1;&#x76D8;</a></li><li><span class="title-icon"></span><a href="#disk-command"><b>2. </b>Disk Command</a></li><li><span class="title-icon"></span><a href="#&#x6302;&#x8F7D;"><b>3. </b>&#x6302;&#x8F7D;</a></li><li><span class="title-icon"></span><a href="#fio"><b>4. </b>fio</a></li><li><span class="title-icon"></span><a href="#mount-tmpfs"><b>5. </b>mount tmpfs</a></li><li><span class="title-icon"></span><a href="#&#x5173;&#x95ED;-ext4-journal"><b>6. </b>&#x5173;&#x95ED; ext4 journal</a></li><li><span class="title-icon"></span><a href="#io-&#x76D1;&#x63A7;"><b>7. </b>IO &#x76D1;&#x63A7;</a></li><ul><li><span class="title-icon"></span><a href="#&#x7CFB;&#x7EDF;-io-&#x76D1;&#x63A7;"><b>7.1. </b>&#x7CFB;&#x7EDF; IO &#x76D1;&#x63A7;</a></li><ul><li><span class="title-icon"></span><a href="#&#x6CE8;-&#x5404;&#x7EDF;&#x8BA1;&#x91CF;&#x4E4B;&#x95F4;&#x5173;&#x7CFB;"><b>7.1.1. </b>&#x6CE8;: &#x5404;&#x7EDF;&#x8BA1;&#x91CF;&#x4E4B;&#x95F4;&#x5173;&#x7CFB;</a></li><li><span class="title-icon"></span><a href="#&#x603B;&#x7ED3;"><b>7.1.2. </b>&#x603B;&#x7ED3;:</a></li></ul><li><span class="title-icon"></span><a href="#&#x8FDB;&#x7A0B;-io"><b>7.2. </b>&#x8FDB;&#x7A0B; IO</a></li></ul></ul></div><a href="#&#x683C;&#x5F0F;&#x5316;&#x78C1;&#x76D8;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="&#x683C;&#x5F0F;&#x5316;&#x78C1;&#x76D8;"><a name="&#x683C;&#x5F0F;&#x5316;&#x78C1;&#x76D8;" class="anchor-navigation-ex-anchor" href="#&#x683C;&#x5F0F;&#x5316;&#x78C1;&#x76D8;"><i class="fa fa-link" aria-hidden="true"></i></a>1. &#x683C;&#x5F0F;&#x5316;&#x78C1;&#x76D8;</h1><pre class="language-"><code class="lang-bash"><span class="token function">sudo</span> mkfs.ext3 /dev/sda6 &#x628A;&#x8BE5;&#x8BBE;&#x5907;&#x683C;&#x5F0F;&#x5316;&#x6210;ext3&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;
<span class="token function">sudo</span> mke2fs -j /dev/sda6 &#x628A;&#x8BE5;&#x8BBE;&#x5907;&#x683C;&#x5F0F;&#x5316;&#x6210;ext3&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3002;  
<span class="token function">sudo</span> mkfs.ext2 /dev/sda6 &#x628A;&#x8BE5;&#x8BBE;&#x5907;&#x683C;&#x5F0F;&#x5316;&#x6210;ext2&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3002;  
<span class="token function">sudo</span> mke2fs /dev/sda6 &#x628A;&#x8BE5;&#x8BBE;&#x5907;&#x683C;&#x5F0F;&#x5316;&#x6210;ext2&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3002;  
<span class="token function">sudo</span> mkfs.reiserfs /dev/sda6 &#x628A;&#x8BE5;&#x8BBE;&#x5907;&#x683C;&#x5F0F;&#x5316;&#x6210;reiserfs&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3002;  
<span class="token function">sudo</span> mkfs.vfat /dev/sda6 &#x628A;&#x8BE5;&#x8BBE;&#x5907;&#x683C;&#x5F0F;&#x5316;&#x6210;fat32&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3002;  
<span class="token function">sudo</span> mkfs.msdos /dev/sda6 &#x628A;&#x8BE5;&#x8BBE;&#x5907;&#x683C;&#x5F0F;&#x5316;&#x6210;fat16&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;,msdos&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5C31;&#x662F;fat16&#x3002;  
<span class="token function">sudo</span> mkdosfs /dev/sda6 &#x628A;&#x8BE5;&#x8BBE;&#x5907;&#x683C;&#x5F0F;&#x5316;&#x6210;fat16&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x540C;mkfs.msdos  
<span class="token function">sudo</span> mkswap /dev/sda6 &#x628A;&#x8BE5;&#x8BBE;&#x5907;&#x683C;&#x5F0F;&#x5316;&#x6210;swap&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;
</code></pre><h1 id="disk-command"><a name="disk-command" class="anchor-navigation-ex-anchor" href="#disk-command"><i class="fa fa-link" aria-hidden="true"></i></a>2. Disk Command</h1><pre class="language-"><code class="lang-bash"><span class="token function">df</span> -Th <span class="token comment"># &#x663E;&#x793A;&#x78C1;&#x76D8;&#x6302;&#x5728;&#x76EE;&#x5F55;&#xFF0C;&#x4EE5;&#x53CA;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;</span>
lsblk  <span class="token comment"># displays block devices</span>
<span class="token function">fdisk</span> -l <span class="token comment"># &#x663E;&#x793A;&#x78C1;&#x76D8;&#x7269;&#x7406;&#x72B6;&#x6001;</span>
</code></pre><h1 id="&#x6302;&#x8F7D;"><a name="&#x6302;&#x8F7D;" class="anchor-navigation-ex-anchor" href="#&#x6302;&#x8F7D;"><i class="fa fa-link" aria-hidden="true"></i></a>3. &#x6302;&#x8F7D;</h1><pre class="language-"><code class="lang-bash">mount&#xFF1A;&#x76F4;&#x63A5;&#x8F93;&#x51FA;&#x6240;&#x6709;&#x7684;&#x76D8;&#x7B26;&#x6302;&#x8F7D;&#x60C5;&#x51B5;
<span class="token function">mount</span> <span class="token punctuation">[</span>-t type<span class="token punctuation">]</span> device dir: &#x5C06;device&#x6302;&#x8F7D;&#x5230;&#x76EE;&#x5F55;dir&#x4E0A;&#x3002;&#x5982;&#x679C;dir&#x662F;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x7684;&#x6709;&#x5185;&#x5BB9;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x90A3;&#x4E48;&#x65B0;&#x6302;&#x8F7D;&#x7684;&#x76D8;&#x4F1A;&#x6682;&#x65F6;&#x66FF;&#x6362;&#x539F;&#x6709;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x53EA;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x547D;&#x4EE4; umount&#x5378;&#x8F7D;disk&#x5373;&#x53EF;&#x3002;
</code></pre><h1 id="fio"><a name="fio" class="anchor-navigation-ex-anchor" href="#fio"><i class="fa fa-link" aria-hidden="true"></i></a>4. fio</h1><p><a href="https://fio.readthedocs.io/en/latest/fio_doc.html" target="_blank">fio documentation</a></p><p><a href="https://thesanguy.com/2018/01/24/storage-performance-benchmarking-with-fio/" target="_blank">Storage Performance Benchmarking with fio</a></p><h1 id="mount-tmpfs"><a name="mount-tmpfs" class="anchor-navigation-ex-anchor" href="#mount-tmpfs"><i class="fa fa-link" aria-hidden="true"></i></a>5. mount tmpfs</h1><pre class="language-"><code class="lang-bash"><span class="token function">cd</span> 
<span class="token function">mkdir</span> tmp
<span class="token comment"># &#x5728;&#x81EA;&#x5DF1;&#x7684;home &#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; mount &#x5230;RAM &#x7684; tmp folder</span>
<span class="token function">sudo</span> <span class="token function">mount</span> tmpfs ~/tmp/ -t tmpfs
<span class="token comment"># mount -t tmpfs -o size=512m tmpfs /mnt/ram # &#x6302;&#x8F7D;&#x4E00;&#x4E2A; 512MB &#x7684;memory &#x7A7A;&#x95F4;&#x5230; /mnt/ram &#x4F5C;&#x4E3A; ram &#x78C1;&#x76D8;</span>

<span class="token comment"># umount</span>
<span class="token function">sudo</span> <span class="token function">umount</span> ~/tmp
</code></pre><h1 id="&#x5173;&#x95ED;-ext4-journal"><a name="&#x5173;&#x95ED;-ext4-journal" class="anchor-navigation-ex-anchor" href="#&#x5173;&#x95ED;-ext4-journal"><i class="fa fa-link" aria-hidden="true"></i></a>6. &#x5173;&#x95ED; ext4 journal</h1><pre class="language-"><code class="lang-bash"><span class="token comment"># &#x683C;&#x5F0F;&#x5316;&#x78C1;&#x76D8; </span>
hanson@u41@14:51:22:~ <span class="token function">sudo</span> mkfs.ext4 /dev/nvme0n1
mke2fs 1.44.1 <span class="token punctuation">(</span>24-Mar-2018<span class="token punctuation">)</span>
Discarding device blocks: <span class="token keyword">done</span>
Creating filesystem with 293028246 4k blocks and 73261056 inodes
Filesystem UUID: 03727098-d292-4bb3-8d4c-c5ad157ec54e
Superblock backups stored on blocks:
    32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,
    4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968,
    102400000, 214990848
<span class="token punctuation">..</span>.

<span class="token comment"># &#x67E5;&#x770B;&#x662F;&#x5426;&#x5F00;&#x542F;&#x65E5;&#x5FD7;</span>
hanson@u41@14:53:52:~ <span class="token function">sudo</span> dumpe2fs /dev/nvme0n1 <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&apos;Filesystem features&apos;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&apos;has_journal&apos;</span>
dumpe2fs 1.44.1 <span class="token punctuation">(</span>24-Mar-2018<span class="token punctuation">)</span>
Filesystem features:      has_journal ext_attr resize_inode dir_index filetype extent 64bit flex_bg sparse_super large_file huge_file dir_nlink extra_isize metadata_csum

<span class="token comment"># &#x5173;&#x95ED;&#x65E5;&#x5FD7;</span>
hanson@u41@14:53:52:~ <span class="token function">sudo</span> tune2fs -O ^has_journal /dev/nvme0n1
tune2fs 1.44.1 <span class="token punctuation">(</span>24-Mar-2018<span class="token punctuation">)</span>

<span class="token comment"># &#x5F00;&#x542F;&#x65E5;&#x5FD7;</span>
hanson@u41@14:53:52:~ <span class="token function">sudo</span> tune2fs -O has_journal /dev/nvme0n1
</code></pre><h1 id="io-&#x76D1;&#x63A7;"><a name="io-&#x76D1;&#x63A7;" class="anchor-navigation-ex-anchor" href="#io-&#x76D1;&#x63A7;"><i class="fa fa-link" aria-hidden="true"></i></a>7. IO &#x76D1;&#x63A7;</h1><p>&#x53C2;&#x770B; <a href="https://www.cnblogs.com/quixotic/p/3258730.html" target="_blank">Linux&#x4E0B;&#x7684;IO&#x76D1;&#x63A7;&#x4E0E;&#x5206;&#x6790;</a></p><p><img src="../../img/IO.png" alt="IO"></p><h2 id="&#x7CFB;&#x7EDF;-io-&#x76D1;&#x63A7;"><a name="&#x7CFB;&#x7EDF;-io-&#x76D1;&#x63A7;" class="anchor-navigation-ex-anchor" href="#&#x7CFB;&#x7EDF;-io-&#x76D1;&#x63A7;"><i class="fa fa-link" aria-hidden="true"></i></a>7.1. &#x7CFB;&#x7EDF; IO &#x76D1;&#x63A7;</h2><pre class="language-"><code class="lang-bash">iostat -xdmt 1
</code></pre><ul><li><code>%util</code>:&#x4EE3;&#x8868;&#x78C1;&#x76D8;&#x7E41;&#x5FD9;&#x7A0B;&#x5EA6;&#x3002;100% &#x8868;&#x793A;&#x78C1;&#x76D8;&#x7E41;&#x5FD9;, 0%&#x8868;&#x793A;&#x78C1;&#x76D8;&#x7A7A;&#x95F2;&#x3002;&#x4F46;&#x662F;&#x6CE8;&#x610F;,&#x78C1;&#x76D8;&#x7E41;&#x5FD9;&#x4E0D;&#x4EE3;&#x8868;&#x78C1;&#x76D8;(&#x5E26;&#x5BBD;)&#x5229;&#x7528;&#x7387;&#x9AD8;</li><li><code>argrq-sz</code>:&#x63D0;&#x4EA4;&#x7ED9;&#x9A71;&#x52A8;&#x5C42;&#x7684;IO&#x8BF7;&#x6C42;&#x5927;&#x5C0F;,&#x4E00;&#x822C;&#x4E0D;&#x5C0F;&#x4E8E;4K,&#x4E0D;&#x5927;&#x4E8E;max(readahead_kb, max_sectors_kb). &#x53EF;&#x7528;&#x4E8E;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x7684;IO&#x6A21;&#x5F0F;,&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;,&#x5C24;&#x5176;&#x662F;&#x78C1;&#x76D8;&#x7E41;&#x5FD9;&#x65F6;, &#x8D8A;&#x5927;&#x4EE3;&#x8868;&#x987A;&#x5E8F;,&#x8D8A;&#x5C0F;&#x4EE3;&#x8868;&#x968F;&#x673A;</li><li><code>svctm</code>: &#x4E00;&#x6B21;IO&#x8BF7;&#x6C42;&#x7684;&#x670D;&#x52A1;&#x65F6;&#x95F4;,&#x5BF9;&#x4E8E;&#x5355;&#x5757;&#x76D8;,&#x5B8C;&#x5168;&#x968F;&#x673A;&#x8BFB;&#x65F6;,&#x57FA;&#x672C;&#x5728;7ms&#x5DE6;&#x53F3;,&#x65E2;&#x5BFB;&#x9053;+&#x65CB;&#x8F6C;&#x5EF6;&#x8FDF;&#x65F6;&#x95F4;</li></ul><h3 id="&#x6CE8;-&#x5404;&#x7EDF;&#x8BA1;&#x91CF;&#x4E4B;&#x95F4;&#x5173;&#x7CFB;"><a name="&#x6CE8;-&#x5404;&#x7EDF;&#x8BA1;&#x91CF;&#x4E4B;&#x95F4;&#x5173;&#x7CFB;" class="anchor-navigation-ex-anchor" href="#&#x6CE8;-&#x5404;&#x7EDF;&#x8BA1;&#x91CF;&#x4E4B;&#x95F4;&#x5173;&#x7CFB;"><i class="fa fa-link" aria-hidden="true"></i></a>7.1.1. &#x6CE8;: &#x5404;&#x7EDF;&#x8BA1;&#x91CF;&#x4E4B;&#x95F4;&#x5173;&#x7CFB;</h3><pre class="language-"><code class="lang-bash"><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>

%util <span class="token operator">=</span> <span class="token punctuation">(</span> r/s  +  w/s<span class="token punctuation">)</span> * svctm / 1000             <span class="token comment"># &#x961F;&#x5217;&#x957F;&#x5EA6; =  &#x5230;&#x8FBE;&#x7387; * &#x5E73;&#x5747;&#x670D;&#x52A1;&#x65F6;&#x95F4;</span>
avgrq-sz <span class="token operator">=</span> <span class="token punctuation">(</span> rMB/s + wMB/s<span class="token punctuation">)</span> * 2048 / <span class="token punctuation">(</span>r/s  + w/s<span class="token punctuation">)</span> <span class="token comment"># 2048 &#x4E3A; 1M / 512</span>

<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
</code></pre><h3 id="&#x603B;&#x7ED3;"><a name="&#x603B;&#x7ED3;" class="anchor-navigation-ex-anchor" href="#&#x603B;&#x7ED3;"><i class="fa fa-link" aria-hidden="true"></i></a>7.1.2. &#x603B;&#x7ED3;:</h3><p>iostat &#x7EDF;&#x8BA1;&#x7684;&#x662F;&#x901A;&#x7528;&#x5757;&#x5C42;&#x7ECF;&#x8FC7;&#x5408;&#x5E76;(rrqm/s, wrqm/s)&#x540E;,&#x76F4;&#x63A5;&#x5411;&#x8BBE;&#x5907;&#x63D0;&#x4EA4;&#x7684;IO&#x6570;&#x636E;,&#x53EF;&#x4EE5;&#x53CD;&#x6620;&#x7CFB;&#x7EDF;&#x6574;&#x4F53;&#x7684;IO&#x72B6;&#x51B5;,&#x4F46;&#x662F;&#x6709;&#x4EE5;&#x4E0B;2&#x4E2A;&#x7F3A;&#x70B9;:</p><ol><li>&#x8DDD;&#x79BB;&#x4E1A;&#x52A1;&#x5C42;&#x6BD4;&#x8F83;&#x9065;&#x8FDC;,&#x8DDF;&#x4EE3;&#x7801;&#x4E2D;&#x7684;write,read&#x4E0D;&#x5BF9;&#x5E94;(&#x7531;&#x4E8E;&#x7CFB;&#x7EDF;&#x9884;&#x8BFB; + pagecache + IO&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#x7B49;&#x56E0;&#x7D20;, &#x4E5F;&#x5F88;&#x96BE;&#x5BF9;&#x5E94;)</li><li>&#x662F;&#x7CFB;&#x7EDF;&#x7EA7;,&#x6CA1;&#x529E;&#x6CD5;&#x7CBE;&#x786E;&#x5230;&#x8FDB;&#x7A0B;,&#x6BD4;&#x5982;&#x53EA;&#x80FD;&#x544A;&#x8BC9;&#x4F60;&#x73B0;&#x5728;&#x78C1;&#x76D8;&#x5F88;&#x5FD9;,&#x4F46;&#x662F;&#x6CA1;&#x529E;&#x6CD5;&#x544A;&#x8BC9;&#x4F60;&#x662F;&#x8C01;&#x5728;&#x5FD9;,&#x5728;&#x5FD9;&#x4EC0;&#x4E48;&#xFF1F;</li></ol><h2 id="&#x8FDB;&#x7A0B;-io"><a name="&#x8FDB;&#x7A0B;-io" class="anchor-navigation-ex-anchor" href="#&#x8FDB;&#x7A0B;-io"><i class="fa fa-link" aria-hidden="true"></i></a>7.2. &#x8FDB;&#x7A0B; IO</h2><ol><li><code>iotop</code> &#x987E;&#x540D;&#x601D;&#x4E49;, io&#x7248;&#x7684;top</li><li><code>pidstat</code> &#x987E;&#x540D;&#x601D;&#x4E49;, &#x7EDF;&#x8BA1;&#x8FDB;&#x7A0B;(pid)&#x7684;stat,&#x8FDB;&#x7A0B;&#x7684;stat&#x81EA;&#x7136;&#x5305;&#x62EC;&#x8FDB;&#x7A0B;&#x7684;IO&#x72B6;&#x51B5;</li></ol><p>&#x8FD9;&#x4E24;&#x4E2A;&#x547D;&#x4EE4;,&#x90FD;&#x53EF;&#x4EE5;&#x6309;&#x8FDB;&#x7A0B;&#x7EDF;&#x8BA1;IO&#x72B6;&#x51B5;,&#x56E0;&#x6B64;&#x53EF;&#x4EE5;&#x56DE;&#x7B54;&#x4F60;&#x4EE5;&#x4E0B;&#x4E8C;&#x4E2A;&#x95EE;&#x9898;</p><ul><li>&#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x54EA;&#x4E9B;&#x8FDB;&#x7A0B;&#x5728;&#x5360;&#x7528;IO,&#x767E;&#x5206;&#x6BD4;&#x662F;&#x591A;&#x5C11;?</li><li>&#x5360;&#x7528;IO&#x7684;&#x8FDB;&#x7A0B;&#x662F;&#x5728;&#x8BFB;?&#x8FD8;&#x662F;&#x5728;&#x5199;?&#x8BFB;&#x5199;&#x91CF;&#x662F;&#x591A;&#x5C11;?</li></ul><p>pidstat &#x53C2;&#x6570;&#x5F88;&#x591A;,&#x4EC5;&#x7ED9;&#x51FA;&#x51E0;&#x4E2A;&#x4E2A;&#x4EBA;&#x4E60;&#x60EF;</p><pre class="language-"><code class="lang-bash">pidstat -d  1           <span class="token comment">#&#x53EA;&#x663E;&#x793A;IO</span>

pidstat -u -r -d -t 1   <span class="token comment"># -d IO &#x4FE1;&#x606F;,</span>
                        <span class="token comment"># -r &#x7F3A;&#x9875;&#x53CA;&#x5185;&#x5B58;&#x4FE1;&#x606F;</span>
                        <span class="token comment"># -u CPU&#x4F7F;&#x7528;&#x7387;</span>
                        <span class="token comment"># -t &#x4EE5;&#x7EBF;&#x7A0B;&#x4E3A;&#x7EDF;&#x8BA1;&#x5355;&#x4F4D;</span>
                        <span class="token comment"># 1  1&#x79D2;&#x7EDF;&#x8BA1;&#x4E00;&#x6B21;</span>
</code></pre><footer class="footer"><div class="footer__container--normal" alt="
http://xszhao.science/cheatsheet/content/linux/disk.html
"><img src="data:image/gif;base64,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" width="170" height="170"><div class="footer__description--normal"><p class="paragraph footer__author--normal" style="color: #000 !important;">XS Zhao<sup class="super">&#xAE;</sup></p><p class="paragraph footer__quote--normal" style="color: #000 !important;">Stay Foolish, Stay Hungry</p><div class="footer__main--normal"><p class="paragraph footer__main__paragraph--normal copyright" style="color: #666 !important;">Copyright &#xA9; hansonzhao007 all right reserved, powered by <a href="https://github.com/aleen42" target="_blank">aleen42</a></p><p class="paragraph footer__main__paragraph--normal footer__modifyTime--normal" style="color: #666 !important;"><span style="color: #666 !important;">modified at</span> 2019-02-23 03:14:29</p></div></div></div><div class="box__issues"><span class="issue-line"><p class="issue-header"><strong>0</strong> issues reported</p></span></div></footer></section></div><div class="search-results"><div class="has-results"><h1 class="search-results-title"><span class="search-results-count"></span> results matching "<span class="search-query"></span>"</h1><ul class="search-results-list"></ul></div><div class="no-results"><h1 class="search-results-title">No results matching "<span class="search-query"></span>"</h1></div></div></div></div></div></div><a href="cpu.html" class="navigation navigation-prev" aria-label="Previous page: cpu"><i class="fa fa-angle-left"></i> </a><a href="inode.html" class="navigation navigation-next" aria-label="Next page: inode"><i class="fa fa-angle-right"></i></a></div><script>var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"disk","level":"1.5.3","depth":2,"next":{"title":"inode","level":"1.5.4","depth":2,"path":"content/linux/inode.md","ref":"content/linux/inode.md","articles":[]},"previous":{"title":"cpu","level":"1.5.2","depth":2,"path":"content/linux/cpu.md","ref":"content/linux/cpu.md","articles":[]},"dir":"ltr"},"config":{"plugins":["prism","-highlight","addcssjs","anchor-navigation-ex","folding-chapters","-lunr","-search","search-plus","splitter","sitemap","github-buttons","page-footer","terminal"],"root":"./","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"splitter":{},"addcssjs":{"css":["./custom/my.css"],"js":["./custom/my.js"]},"fontsettings":{"theme":"white","family":"sans","size":2},"folding-chapters":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showLevel":true},"sitemap":{"hostname":"http://xszhao.science/cheatsheet"},"github-buttons":{"buttons":[{"user":"hansonzhao007","repo":"cheatsheet","type":"star","size":"small","count":true}]},"page-footer":{"isShowIssues":true,"wisdom":"Stay Foolish, Stay Hungry","copyright":"Copyright &#169; hansonzhao007","styles (normal, symmetrical)":"normal","issueNum":"8","style":"normal","repo":"hansonzhao007/cheatsheet","isShowQRCode":true,"timeColor":"#666","utcOffset":"8","format":"yyyy-MM-dd hh:mm:ss","signature":"XS Zhao","token":"","baseUri":"http://xszhao.science/cheatsheet/","copyrightColor":"#666","description":"modified at"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"terminal":{"copyButtons":true,"fade":false,"style":"flat"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"search-plus":{}},"theme":"default","author":"XS Zhao","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"cheatsheet","gitbook":"*"},"file":{"path":"content/linux/disk.md","mtime":"2019-02-22T19:14:29.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-08-30T00:26:08.484Z"},"basePath":"../..","book":{"language":""}});
        });</script></div><script src="../../gitbook/gitbook.js"></script><script src="../../gitbook/theme.js"></script><script src="../../gitbook/gitbook-plugin-folding-chapters/folding-chapters.js"></script><script src="../../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script><script src="../../gitbook/gitbook-plugin-search-plus/search.js"></script><script src="../../gitbook/gitbook-plugin-splitter/splitter.js"></script><script src="../../gitbook/gitbook-plugin-github-buttons/plugin.js"></script><script src="../../gitbook/gitbook-plugin-terminal/plugin.js"></script><script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script><script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script><script type="text/javascript" src="../../custom/my.js"></script></body></html>